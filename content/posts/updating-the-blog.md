Title: Using Jupyter Notebooks to Blog with Pelican
Author: Rob Osterburg
Slug: using-jupyter-notebooks-to-blog-with-pelican
Date: 2019-05-15
Category: Tutorial
Tags: pelican, jupyter, nbconvert, markdown, github pages
Summary: Using Pelican to generate a blog from Jupyter notebook files

## Generating Blog Posts from Jupyter Notebooks

In data science Jupyter notebooks are a prime source of content.  So, why not use notebooks for blog posts?  Much of my exploratory work is captured in notebooks anyway, so I gave it try.  You can do this using `jupyter nbconvert` or by installing a plugin in Pelican.  

Pelican uses plugins to generate HTML and CSS to create posts.  I chose [Pelican-ipynb](https://github.com/danielfrg/pelican-ipynb) to process my notebook files.  It has more than 300 stars on Github and seemed to fit the needs perfectly.  Their Github repo has good documentation and provides all the configuration details you need to get started.  Pelican-ipynb worked well on my local system but I started experience problems once my blog posts were published.  Let me take a step back and tell you that plugins for Pelican are installed as git submodules (a repo in repo).  Getting the submodules to be installed and used by Github is where I ran into problems.  After several attempts to fix the issue but having no success I moved on to Jupyter's `nbconvert` tool.  I plan on giving Pelican-ipynb another try once I have become more familiar with Pelican.  Until then `nbconvert` allows me to convert my notebooks to Markdown by running `jupyter nbconvert --to=markdown your-notebook.ipynb`.  you can just as easily generate HTML or PDF files by justing changing the `to` flag.  

## Preparing your Post

1. Pelican uses metadata to tag and title your posts.  For markdown documents, you need to include these tags ascribes content to each of your posts.  If you are going with notebook-based approach put these tags into a markdown cell at the top of your document.
   1. Tags for Markdown or `.md` files

        ```text
        Title:
        Slug:
        Date:
        Category:
        Tags:
        Author:
        Summary:
        ```

   1. Tags for notebook or `.ipynb` files
   
        ```text
        - Title:
        - Slug:
        - Date:
        - Category:
        - Tags:
        - Author:
        - Summary:
        ```


1. Checkout content branch on your blog (I use _source_), add, edit and check-in your new post

## Generating and Reviewing Content

1. Run `jupyter nbconvert --to=markdown your-notebook.ipynb`.  Note: `jupyter nbconvert --help` has good explanations of how else to use `nbconvert`.  
1. Run `pelican content` from your blogs root directory and automatically detects changes in content
1. Fix any warnings or errors that Pelican reports  
1. Start Python's build-in web server by running: `python -m http.server 8000`
1. Change to the output directory by running `cd output`
1. Open `http://localhost:8000` in your browser and review your blogs appearance
1. Keep editing and refreshing to see your latest changes
1. Control-c to halt `pelican content`

## Publishing to Github Pages

Github pages supports both individuals and organizations.  *For individuals, your blog must be published on the master branch of your pages repository.*  So instead being the ultimate source of blog, the master branch is composed of all the build artifacts generated by Pelican.  Think generated HTML, CSS and other files.  To me this counter intuitive, and so, I wrote this post to provide clarity to my future self and others.

1. Check in any last changes to your `source` branch
1. Run `pelican content -o output -s pelicanconf.py`
1. Run `ghp-import output -b gh-pages`
1. Run `git push  https://github.com/robOcity/robocity.github.com.git gh-pages:master`

## Resources

1. [Documentation: Pelican Stable](https://docs.getpelican.com/en/stable/index.html)
1. [Repository: pelican-ipynb plugin]([pelican-ipynb](https://github.com/danielfrg/pelican-ipynb))
1. [Blog: Matt Makai's Excellent Pelican Posts](https://www.fullstackpython.com/pelican.html)
1. [Blog: Some Tips for Using Jupyter Notebooks with Pelican](https://pmbaumgartner.github.io/blog/jupyter-notebooks-for-pelican/)
1. [Blog: Hacking my way to a Jupyter notebook powered blog](https://nipunbatra.github.io/blog/2017/Jupyter-powered-blog.html)
